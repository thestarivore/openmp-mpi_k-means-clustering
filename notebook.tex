
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{openmp\_mpi\_k-means}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{k-means-clustering-with-openmp-and-mpi}{%
\section{K-Means Clustering with OpenMP and
MPI}\label{k-means-clustering-with-openmp-and-mpi}}

\hypertarget{implement-the-k-means-clustering-algorithm-in-openmpmpi-trying-to-maximize-the-performance-reduce-the-execution-time-by-carefully-exploiting-the-resources-within-one-computing-node-with-multiple-processing-cores-openmp-and-across-computing-nodes-mpi.}{%
\subsubsection{Implement the k-means clustering algorithm in OpenMP/MPI,
trying to maximize the performance (reduce the execution time) by
carefully exploiting the resources within one computing node with
multiple processing cores (OpenMP) and across computing nodes
(MPI).}\label{implement-the-k-means-clustering-algorithm-in-openmpmpi-trying-to-maximize-the-performance-reduce-the-execution-time-by-carefully-exploiting-the-resources-within-one-computing-node-with-multiple-processing-cores-openmp-and-across-computing-nodes-mpi.}}

Optional: implement the same algorithm in Apache Flink and compare the
performance of the two implementations (processing time and scalability)
under various workloads.

\begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{import} \PY{n+nn}{csv}
        \PY{k+kn}{import} \PY{n+nn}{random}
        \PY{k+kn}{import} \PY{n+nn}{sys}
        
        \PY{k+kn}{import} \PY{n+nn}{numpy}
        \PY{k+kn}{import} \PY{n+nn}{os}  \PY{c+c1}{\PYZsh{} We need this module}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}\PY{p}{;}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{datasets}\PY{n+nn}{.}\PY{n+nn}{samples\PYZus{}generator} \PY{k}{import} \PY{n}{make\PYZus{}blobs}
        \PY{n}{sns}\PY{o}{.}\PY{n}{set}\PY{p}{(}\PY{p}{)}  \PY{c+c1}{\PYZsh{} for plot styling}
        
        \PY{c+c1}{\PYZsh{}Samples}
        \PY{n}{N\PYZus{}SAMPLES} \PY{o}{=} \PY{l+m+mi}{100000}
        
        \PY{c+c1}{\PYZsh{} Get path of the current dir, then use it to create paths:}
        \PY{n}{CURRENT\PYZus{}DIR} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{dirname}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZus{}\PYZus{}file\PYZus{}\PYZus{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{file\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/dataset.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{initial\PYZus{}dataset\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/initialdataset.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{initial\PYZus{}centroids\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/initialcentroids.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{new\PYZus{}dataset\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/newdataset.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{new\PYZus{}centroids\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/newcentroids.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{objfun\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/objfun.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{exectimes\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/exectimes.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}100\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}100/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}1K\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}1K/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}10K\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}10K/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}100K\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}100K/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}1M\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}1M/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{results\PYZus{}10M\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dataset\PYZus{}display/results\PYZus{}10M/results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        \PY{n}{fig\PYZus{}width} \PY{o}{=} \PY{l+m+mi}{12}
        \PY{n}{fig\PYZus{}height} \PY{o}{=} \PY{l+m+mi}{10}
\end{Verbatim}


    \hypertarget{initial-dataset}{%
\section{Initial Dataset}\label{initial-dataset}}

    \hypertarget{display-the-points-in-the-initial-dataset}{%
\subsection{Display the points in the Initial
Dataset:}\label{display-the-points-in-the-initial-dataset}}

    We have an Initial Dataset of 100000 points (later on we'll be using
different sizes), randomly generated by a custom Python script. These
points are already somehow divided in clusters so that we can more
easily test the K-Means Clustering algorithm.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X,Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{initial\PYZus{}dataset\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{k}{for} \PY{n}{i}\PY{p}{,}\PY{n}{row} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{reader}\PY{p}{)}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                \PY{k}{if}\PY{p}{(}\PY{n}{i} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
                    \PY{k}{break}
                    
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Total points: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{format}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
X,Y
4.762006 -7.700549
4.490764 -8.202433
-1.384802 2.850730
-1.411994 -6.885759
0.045029 1.578344
-7.419469 9.258043
-6.915910 9.343622
-7.663262 8.672174
-2.618907 -6.364270
-1.369107 -8.103168
-7.965163 9.759896
Total points: 100000

    \end{Verbatim}

    \hypertarget{and-now-we-plot-the-initial-dataset}{%
\subsection{And now we plot the initial
dataset:}\label{and-now-we-plot-the-initial-dataset}}

    By plotting the dataset, we can see that is indeed form by 4 clusters
easily observable. We'll later test the K-Means Clustering algorithm and
see if it can also individuate the clusters.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{n}{x} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}
        \PY{n}{y} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Read the dataset from the CVS file}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{initial\PYZus{}dataset\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
            \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                \PY{n}{x}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{n}{y}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{c+c1}{\PYZsh{}print(x[i], y[i])}
                \PY{n}{i}\PY{o}{=}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}
        
        \PY{c+c1}{\PYZsh{}Plot the read dataset}
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{x}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{y}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{s}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_8_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{initial-centroids}{%
\subsection{Initial Centroids}\label{initial-centroids}}

    The Initial Centroids are randomly placed at runtime, however a
centroids will be recreated if it is too close to another centroid. The
initial placing of the centroids is of fundamental importance to the
result of the K-Means Clustering algorithm execution on a given dataset.
Let's print the centroids:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cluster,X,Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{centroids} \PY{o}{=} \PY{l+m+mi}{0}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{initial\PYZus{}centroids\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{centroids}\PY{p}{,} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                \PY{n}{centroids} \PY{o}{=} \PY{n}{centroids} \PY{o}{+} \PY{l+m+mi}{1}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Total centroids: }\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{centroids}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Cluster,X,Y
0 3.066931 9.023582
1 -4.933069 3.023582
2 -1.933069 -5.976418
3 -6.933069 -10.976418
Total centroids: 4

    \end{Verbatim}

    And now we plot them:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{n}{x} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{centroids}\PY{p}{)}
        \PY{n}{y} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{centroids}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}Read the dataset from the CVS file}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{initial\PYZus{}centroids\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
            \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                \PY{n}{x}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{n}{y}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{c+c1}{\PYZsh{}print(x[i], y[i])}
                \PY{n}{i}\PY{o}{=}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}
        
        \PY{c+c1}{\PYZsh{}Plot the read dataset}
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{x}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{y}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{marker}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{X}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{s}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_13_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{plotting-both-dataset-and-centroids}{%
\section{Plotting both Dataset and
Centroids}\label{plotting-both-dataset-and-centroids}}

    We've run the K-Means Clustering Algorithm on the initial dataset and
got new centroids each associated to a cluster. So we now plot the
resulting clusters separated by a random color and their centroids:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{k}{def} \PY{n+nf}{random\PYZus{}color}\PY{p}{(}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n}{numpy}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{rand}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{,}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n}{x} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}
        \PY{n}{y} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}
        \PY{n}{c} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}
        \PY{n}{cx} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
        \PY{n}{cy} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
        
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Read the new centroids from the CVS file}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{new\PYZus{}centroids\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                \PY{n}{cx}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                \PY{n}{cy}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Read the new dataset from the CVS file}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{new\PYZus{}dataset\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
            \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                \PY{n}{x}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{X}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{n}{y}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{n}{c}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                \PY{c+c1}{\PYZsh{} print(x[i], y[i])}
                \PY{n}{i} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
        
        \PY{n}{minK} \PY{o}{=} \PY{n}{c}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}
        \PY{n}{maxK} \PY{o}{=} \PY{n}{c}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}
        \PY{n}{k} \PY{o}{=} \PY{p}{(}\PY{n+nb}{int}\PY{p}{)}\PY{p}{(}\PY{n}{maxK} \PY{o}{\PYZhy{}} \PY{n}{minK} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} plot the points for each cluster with a different color}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{k}\PY{p}{)}\PY{p}{:}
            \PY{n}{x2} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
            \PY{n}{y2} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
        
            \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N\PYZus{}SAMPLES}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n}{c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{p}{:}
                    \PY{n}{x2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{x}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{)}
                    \PY{n}{y2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{y}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{} Plot the read dataset}
            \PY{n}{color1} \PY{o}{=} \PY{n}{random\PYZus{}color}\PY{p}{(}\PY{p}{)}
            \PY{n}{color2} \PY{o}{=} \PY{n}{random\PYZus{}color}\PY{p}{(}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{x2}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{y2}\PY{p}{[}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{c}\PY{o}{=}\PY{n}{color1}\PY{p}{,} \PY{n}{s}\PY{o}{=}\PY{l+m+mi}{50}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{cx}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{cy}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{c}\PY{o}{=}\PY{n}{color1}\PY{p}{,} \PY{n}{marker}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{X}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{n}{color2}\PY{p}{,} \PY{n}{s}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_17_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{running-modes-normal-openmp-mpi-mpi-openmp}{%
\subsection{Running Modes: Normal, OpenMP, MPI, MPI +
OpenMP}\label{running-modes-normal-openmp-mpi-mpi-openmp}}

    The program written in C actually executes four different versions of
the K-Means Clustering Algorithm. They run sequentially one at a time,
but they use the same initial dataset and the same random pair of
initial centroids. The initial position of the centroids is of vital
importance to the result of the execution so is important that all four
versions use the same set of centroids so that we can have a meaningful
comparison in performance. All four versions will produce the same
result and same objective function value, but they will have different
execution times.

We've set the maximum number of cores for the OpenMP version (4 on this
PC), and 4 parallel nodes for the MPI (and MPI+OpenMP) version. As
expected the OpenMP version perform much better that the sequential
version, while with MPI is not always the case, here are the results of
a single execution on this dataset:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Execution Times:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{t} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{exectimes\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{k}{for} \PY{n}{i}\PY{p}{,}\PY{n}{row} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{reader}\PY{p}{)}\PY{p}{:}
                \PY{n}{t}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                    
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normal Execution \PYZhy{}\PYZhy{}\PYZgt{} }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{t}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{1000}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ms}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OpenMP Execution \PYZhy{}\PYZhy{}\PYZgt{} }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{t}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{1000}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ms}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI Execution    \PYZhy{}\PYZhy{}\PYZgt{} }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{t}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{1000}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ms}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI + OpenMP Execution    \PYZhy{}\PYZhy{}\PYZgt{} }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{t}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{o}{*}\PY{l+m+mi}{1000}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ms}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Execution Times:

Normal Execution --> 103.364ms
OpenMP Execution --> 107.58800000000001ms
MPI Execution    --> 50.316ms
MPI + OpenMP Execution    --> 219.138ms

    \end{Verbatim}

    While the value of the Objective Function is:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{n}{objfun} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{objfun\PYZus{}path}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
            \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
            \PY{k}{for} \PY{n}{i}\PY{p}{,}\PY{n}{row} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{reader}\PY{p}{)}\PY{p}{:}
                \PY{n}{objfun}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                    
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjectiveFunction value \PYZhy{}\PYZhy{}\PYZgt{} }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{objfun}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
ObjectiveFunction value --> 71883.570312

    \end{Verbatim}

    \hypertarget{section}{%
\subsection{------------------------------------------}\label{section}}

    \hypertarget{amazonaws-starcluster-results}{%
\section{AmazonAWS Starcluster
Results}\label{amazonaws-starcluster-results}}

    All the executions and tests explained below were run on a cluster of
\textbf{four c3.xlarge EC2 Nodes} on Amazon AWS by using the Starcluster
open source cluster-computing toolkit. Each node (c3.xlarge) is a
powerful machine with 4 cores and 8GB of RAM.

    \hypertarget{cumulative-execution-results}{%
\subsubsection{Cumulative Execution
Results}\label{cumulative-execution-results}}

By running a bach script we were able to cumulate a large quantity of
execution results (more than 5000 executions). For consistency we've run
all four different versions of the K-Means Clustering Algorithm
sequentially one at a time on the same initial dataset and the same
random pair of initial centroids (changing every cycle). That way the
results of each execution can be compared with the executions of the
other three versions of the algorithm. For each executions we've stored
the number of centroids, the execution mode (algorithm version), the
execution time and the obj function result.

\hypertarget{relation-between-number-of-centroids-and-obj-function-value}{%
\subsubsection{1) Relation between number of centroids and obj function
value}\label{relation-between-number-of-centroids-and-obj-function-value}}

Let's average the executions results in the large dataset described
above and plot the relation between the number of centroids and the obj
function value. The execution were made with a number of centroids
between 1 and 10.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{k}{def} \PY{n+nf}{getResultsData}\PY{p}{(}\PY{n}{fname}\PY{p}{)}\PY{p}{:}
             \PY{n}{row\PYZus{}count} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fname}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{row\PYZus{}count} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{l+m+mi}{1} \PY{k}{for} \PY{n}{line} \PY{o+ow}{in} \PY{n}{csvfile}\PY{p}{)}
             \PY{n+nb}{print} \PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Rows in the results file: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{row\PYZus{}count}\PY{p}{)}\PY{p}{)}
             \PY{n}{EXECUTIONS} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{p}{(}\PY{n}{row\PYZus{}count} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{4}\PY{p}{)}  
         
             \PY{n}{n\PYZus{}c}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{openmp\PYZus{}c} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}c}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}mp\PYZus{}c} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
         
             \PY{n}{n\PYZus{}t}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{openmp\PYZus{}t} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}t}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}mp\PYZus{}t} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
         
             \PY{n}{n\PYZus{}of}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{openmp\PYZus{}of} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}of}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
             \PY{n}{mpi\PYZus{}mp\PYZus{}of} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Read the new centroids from the CVS file}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fname}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
                 \PY{n}{i1}\PY{p}{,}\PY{n}{i2}\PY{p}{,}\PY{n}{i3}\PY{p}{,}\PY{n}{i4}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}
                 \PY{k}{for} \PY{n}{i}\PY{p}{,}\PY{n}{row} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{reader}\PY{p}{)}\PY{p}{:}
                     \PY{n}{mode} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}print(mode + \PYZdq{}\PYZhy{}\PYZdq{} + str(i))}
         
                     \PY{c+c1}{\PYZsh{}Normal Execution}
                     \PY{k}{if} \PY{n}{mode} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
                         \PY{n}{n\PYZus{}c}\PY{p}{[}\PY{n}{i1}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{n\PYZus{}t}\PY{p}{[}\PY{n}{i1}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{n\PYZus{}of}\PY{p}{[}\PY{n}{i1}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{i1} \PY{o}{=} \PY{n}{i1} \PY{o}{+} \PY{l+m+mi}{1}
                     \PY{c+c1}{\PYZsh{}OpenMP Execution}
                     \PY{k}{elif} \PY{n}{mode} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{openmp\PYZus{}c}\PY{p}{[}\PY{n}{i2}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{openmp\PYZus{}t}\PY{p}{[}\PY{n}{i2}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{openmp\PYZus{}of}\PY{p}{[}\PY{n}{i2}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{i2} \PY{o}{=} \PY{n}{i2} \PY{o}{+} \PY{l+m+mi}{1}
                     \PY{c+c1}{\PYZsh{}MPI Execution}
                     \PY{k}{elif} \PY{n}{mode} \PY{o}{==} \PY{l+m+mi}{2}\PY{p}{:}
                         \PY{n}{mpi\PYZus{}c}\PY{p}{[}\PY{n}{i3}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{mpi\PYZus{}t}\PY{p}{[}\PY{n}{i3}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{mpi\PYZus{}of}\PY{p}{[}\PY{n}{i3}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{i3} \PY{o}{=} \PY{n}{i3} \PY{o}{+} \PY{l+m+mi}{1}
                     \PY{c+c1}{\PYZsh{}MPI + OpenMP Execution}
                     \PY{k}{elif} \PY{n}{mode} \PY{o}{==} \PY{l+m+mi}{3}\PY{p}{:}
                         \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{[}\PY{n}{i4}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{[}\PY{n}{i4}\PY{p}{]}  \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{mpi\PYZus{}mp\PYZus{}of}\PY{p}{[}\PY{n}{i4}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                         \PY{n}{i4} \PY{o}{=} \PY{n}{i4} \PY{o}{+} \PY{l+m+mi}{1}
             \PY{k}{return} \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}10K\PYZus{}path}\PY{p}{)}
                         
         \PY{n}{x\PYZus{}val} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
         \PY{n}{y\PYZus{}val} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}Calc the mean values}
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
             \PY{n}{x\PYZus{}val}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
             \PY{c+c1}{\PYZsh{}print(str(i))}
             
             \PY{c+c1}{\PYZsh{}Iterate all the executions for each centroid number}
             \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}\PY{p}{:}
                 \PY{k}{if} \PY{n}{n\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                     \PY{n}{y\PYZus{}val}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{n\PYZus{}of}\PY{p}{[}\PY{n}{j}\PY{p}{]}
                 
             \PY{c+c1}{\PYZsh{}Obj Function values mean}
             \PY{n}{y\PYZus{}val}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}
             \PY{c+c1}{\PYZsh{}print(str(y\PYZus{}val[i]))}
             
         \PY{c+c1}{\PYZsh{}Plot the between number of centroids and obj function value}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of Centroids \PYZhy{} Obj. Function Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{N\PYZsh{} Centroids}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ObjFun Value}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_27_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resulting-plot-analysis}{%
\subsubsection{Resulting plot analysis}\label{resulting-plot-analysis}}

Given the plot above we can observe the way that the Obj. Function Value
(Y-Axis) changes based on the Number of Centroids (X-Asis) used. And we
can clearly notice that the Knee value is equal to ``4''. It's the Knee
value because the successive numbers of centroids don't have an Obj.
Function Value that decreases greatly. That means that the distances in
between the data points and the centroids for each cluster don't
decrease much after the value of 4 centroids used. So just by observing
the above plot and chosing the knee value we can conclude that the
Dataset is composed of 4 clusters witch is correct since we are the ones
that generated the datased divided in four clusters in the first place.

    \hypertarget{relation-between-number-of-centroids-and-the-execution-time-by-varying-the-dataset-size}{%
\subsubsection{2) Relation between Number of Centroids and the Execution
Time (by varying the Dataset
Size)}\label{relation-between-number-of-centroids-and-the-execution-time-by-varying-the-dataset-size}}

Let's now again average the executions results in five different
Datasets as described above and plot the relation between the number of
centroids and the Execution times. The execution were made with a number
of centroids between 1 and 10.

We'll compare the results for each of the four execution modes:
\textbf{Normal}, \textbf{OpenMP}, \textbf{MPI}, \textbf{MPI + OpenMP}

While the datasets that we'll be using have the following sizes:
\textbf{100, 1K, 10K, 100K and 1M} datapoints (1K=1000 points, 1M =
1000000 points):

    \hypertarget{dataset-size-100}{%
\subsubsection{2.1) Dataset size: 100}\label{dataset-size-100}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{k}{def} \PY{n+nf}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{n}{x\PYZus{}valc}          \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Centroids}
             \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Normal Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}     \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} OpenMP Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI + OpenMP Execution Time}
         
             \PY{c+c1}{\PYZsh{}Calc the mean values}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
                 \PY{n}{x\PYZus{}valc}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
                 \PY{c+c1}{\PYZsh{}print(str(i))}
         
                 \PY{c+c1}{\PYZsh{}Iterate all the executions for each centroid number}
                 \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}\PY{p}{:}
                     \PY{c+c1}{\PYZsh{} Normal Execution}
                     \PY{k}{if} \PY{n}{n\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{n\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} OpenMP Execution}
                     \PY{k}{if} \PY{n}{openmp\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{openmp\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} MPI Execution}
                     \PY{k}{if} \PY{n}{mpi\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{mpi\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} MPI + OpenMP Execution}
                     \PY{k}{if} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                 \PY{c+c1}{\PYZsh{}Execution Time values mean}
                 \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}      \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}     \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}    \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{c+c1}{\PYZsh{}print(\PYZdq{}n \PYZdq{} + str(y\PYZus{}val\PYZus{}n\PYZus{}et[i]))}
                 \PY{c+c1}{\PYZsh{}print(\PYZdq{}mp \PYZdq{} + str(y\PYZus{}val\PYZus{}mp\PYZus{}et[i]))}
                 \PY{c+c1}{\PYZsh{}print(\PYZdq{}mpi \PYZdq{} + str(y\PYZus{}val\PYZus{}mpi\PYZus{}et[i]))}
         
             \PY{c+c1}{\PYZsh{}Plot the relation between number of centroids and obj function value}
             \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valc}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of Centroids \PYZhy{} Execution Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{N\PYZsh{} Centroids}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Exec. Time [ms]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valc}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valc}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valc}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI + OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}100\PYZus{}path}\PY{p}{)}
         \PY{n}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_31_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{dataset-size-1k}{%
\subsubsection{2.2) Dataset size: 1K}\label{dataset-size-1k}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}1K\PYZus{}path}\PY{p}{)}
         \PY{n}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_33_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{dataset-size-10k}{%
\subsubsection{2.3) Dataset size: 10K}\label{dataset-size-10k}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}10K\PYZus{}path}\PY{p}{)}
         \PY{n}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_35_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{dataset-size-100k}{%
\subsubsection{2.4) Dataset size: 100K}\label{dataset-size-100k}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}100K\PYZus{}path}\PY{p}{)}
         \PY{n}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_37_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{dataset-size-1m}{%
\subsubsection{2.5) Dataset size: 1M}\label{dataset-size-1m}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}1M\PYZus{}path}\PY{p}{)}
         \PY{n}{n\PYZus{}t\PYZus{}1M}\PY{p}{,} \PY{n}{openmp\PYZus{}t\PYZus{}1M}\PY{p}{,} \PY{n}{mpi\PYZus{}t\PYZus{}1M}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t\PYZus{}1M} \PY{o}{=} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}
         \PY{n}{plotRealtionCentroidsExecTime}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 609

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_39_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resulting-plots-analysis---executiontime}{%
\subsubsection{Resulting plots analysis -
ExecutionTime}\label{resulting-plots-analysis---executiontime}}

On the above plots we can observe the Execution Times (Y-Axis) for each
execution mode base on the number of centroids (X-Axis). The executions
were repeated a great number of times for each of the five different
datasets dimensions, so that we can test the scalability of the system.

It's immediately clear just by a glance that \textbf{OpenMP Mode (Green
Line), MPI (Red Line) and MPI+OpenMP (Yellow Line) Modes} outperform the
single-core and single-process \textbf{Normal Mode (Blue line)} once
there is a reasonable big dataset (\textgreater{} 10000 points). On less
than 1000 points however none of them performs better than the Normal
Mode (as can be seen in the Figure 2.1 - 100points Dataset). This is
probably due to all the message exchange between the processes that are
necessary for managing the paralellization of the operations and due to
the broadcasting/gathering of the data to/from the nodes.

By adding OpenMP to MPI we can see indeed a big improvement, the
\textbf{MPI+OpenMP (Yellow Line) Mode} not only greatly outperforms the
sequential mode but also the OpenMP and MPI Modes. This way, we take
advantage not only of the multiple nodes but also of the cores on each
node used.

Finally we remind the reader that the above plot is made by averaging
the behavior of a large number of executions each with a different
initial random centroids placement. And it has been noticed that if the
initial placement of the centroids is a good one, then the MPI and
MPI+OpenMP Modes perform better, so \textbf{by engaging in a more
sophisticated algorithms for centroids placement we could improve
overall performance}.

    \hypertarget{relation-between-the-dataset-size-and-the-execution-time}{%
\subsubsection{3) Relation between the Dataset Size and the Execution
Time}\label{relation-between-the-dataset-size-and-the-execution-time}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:}    
         \PY{k}{def} \PY{n+nf}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{n}{x\PYZus{}valc}          \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Centroids}
             \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Normal Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}     \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} OpenMP Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI Execution Time}
             \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI + OpenMP Execution Time}
         
             \PY{c+c1}{\PYZsh{}Calc the mean values}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
                 \PY{n}{x\PYZus{}valc}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
                 \PY{c+c1}{\PYZsh{}print(str(i))}
         
                 \PY{c+c1}{\PYZsh{}Iterate all the executions for each centroid number}
                 \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{EXECUTIONS}\PY{p}{)}\PY{p}{:}
                     \PY{c+c1}{\PYZsh{} Normal Execution}
                     \PY{k}{if} \PY{n}{n\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{n\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} OpenMP Execution}
                     \PY{k}{if} \PY{n}{openmp\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{openmp\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} MPI Execution}
                     \PY{k}{if} \PY{n}{mpi\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{mpi\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                     \PY{c+c1}{\PYZsh{} MPI + OpenMP Execution}
                     \PY{k}{if} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{==} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{:}
                         \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{+} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{[}\PY{n}{j}\PY{p}{]}
         
                 \PY{c+c1}{\PYZsh{}Execution Time values mean}
                 \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}      \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}     \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}    \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{/} \PY{n}{EXECUTIONS}\PY{p}{)} \PY{o}{*} \PY{l+m+mi}{1000}
         
             \PY{k}{return} \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}
         
         
         \PY{n}{x\PYZus{}valds}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Dataset sizes}
         \PY{n}{y\PYZus{}val\PYZus{}n}      \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}    \PY{c+c1}{\PYZsh{} Normal Execution Time}
         \PY{n}{y\PYZus{}val\PYZus{}mp}     \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}    \PY{c+c1}{\PYZsh{} OpenMP Execution Time}
         \PY{n}{y\PYZus{}val\PYZus{}mpi}    \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI Execution Time}
         \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp} \PY{o}{=} \PY{n}{numpy}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}    \PY{c+c1}{\PYZsh{} MPI + OpenMP Execution Time}
         
         \PY{k}{def} \PY{n+nf}{calcMeanExecTime}\PY{p}{(}\PY{n}{j}\PY{p}{)}\PY{p}{:}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{:}
                 \PY{n}{y\PYZus{}val\PYZus{}n}\PY{p}{[}\PY{n}{j}\PY{p}{]}      \PY{o}{+}\PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{y\PYZus{}val\PYZus{}mp}\PY{p}{[}\PY{n}{j}\PY{p}{]}     \PY{o}{+}\PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi}\PY{p}{[}\PY{n}{j}\PY{p}{]}    \PY{o}{+}\PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{+}\PY{o}{=} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{[}\PY{n}{i}\PY{p}{]}
         
             \PY{n}{y\PYZus{}val\PYZus{}n}\PY{p}{[}\PY{n}{j}\PY{p}{]}      \PY{o}{/}\PY{o}{=} \PY{l+m+mi}{10}
             \PY{n}{y\PYZus{}val\PYZus{}mp}\PY{p}{[}\PY{n}{j}\PY{p}{]}     \PY{o}{/}\PY{o}{=} \PY{l+m+mi}{10}
             \PY{n}{y\PYZus{}val\PYZus{}mpi}\PY{p}{[}\PY{n}{j}\PY{p}{]}    \PY{o}{/}\PY{o}{=} \PY{l+m+mi}{10}
             \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{/}\PY{o}{=} \PY{l+m+mi}{10}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}100\PYZus{}path}\PY{p}{)}
         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}
         \PY{n}{calcMeanExecTime}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
         \PY{n}{x\PYZus{}valds}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{=}\PY{l+m+mi}{100}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}1K\PYZus{}path}\PY{p}{)}
         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}
         \PY{n}{calcMeanExecTime}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{x\PYZus{}valds}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{=}\PY{l+m+mi}{1000}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}10K\PYZus{}path}\PY{p}{)}
         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}
         \PY{n}{calcMeanExecTime}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{x\PYZus{}valds}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{o}{=}\PY{l+m+mi}{10000}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}100K\PYZus{}path}\PY{p}{)}
         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}
         \PY{n}{calcMeanExecTime}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{)}
         \PY{n}{x\PYZus{}valds}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{o}{=}\PY{l+m+mi}{100000}
         
         \PY{n}{EXECUTIONS}\PY{p}{,} \PY{n}{n\PYZus{}t}\PY{p}{,} \PY{n}{openmp\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}t}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}t}\PY{p}{,} \PY{n}{n\PYZus{}c}\PY{p}{,} \PY{n}{openmp\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}c}\PY{p}{,} \PY{n}{mpi\PYZus{}mp\PYZus{}c}\PY{p}{,} \PY{n}{n\PYZus{}of} \PY{o}{=} \PY{n}{getResultsData}\PY{p}{(}\PY{n}{results\PYZus{}1M\PYZus{}path}\PY{p}{)}
         \PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et} \PY{o}{=} \PY{n}{getCentroidsExecTime}\PY{p}{(}\PY{p}{)}
         \PY{n}{calcMeanExecTime}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
         \PY{n}{x\PYZus{}valds}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}\PY{o}{=}\PY{l+m+mi}{1000000}
         
         \PY{c+c1}{\PYZsh{}Plot the relation between the dataset size and mean executin time for each mode}
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}n}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dataset Size \PYZhy{} Execution Time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dataset}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Exec. Time [ms]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mp}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI + OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
          
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Rows in the results file: 1209
Rows in the results file: 1209
Rows in the results file: 1209
Rows in the results file: 1209
Rows in the results file: 609

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_42_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resulting-plots-analysis---scalability}{%
\subsubsection{Resulting plots analysis -
Scalability}\label{resulting-plots-analysis---scalability}}

On the above plot we can observe that the scalability of the four modes
on the given datasets and cluster of nodes seems to be linear. Moreover,
by increasing the size of the datasets the performance gap between the
single core and single node mode and the other modes is more pronounced.
Note on the figure that with a small dataset the Normal Mode might
perform similarly (actually performs better with less than 1000 points).
While later on \textbf{the best performing mode is OpenMP+MPI Mode
followed by the OpenMP Mode and MPI Mode.}

OpenMP+MPI Mode outshines both OpenMP Mode and MPI Mode, while there
isn't such a big gap between the latter two. OpenMP performs slightly
better than MPI Mode, probably because the message exchange between the
local cores impacts less than the message exchange between the nodes.

However, the performance of the OpenMP mode we think that is not going
to continue to scale linearly indefinitely by increasing the size of the
dataset and the number of clusters. That is because there is a limit on
how many cores and computational power a machine can have. At some point
the computational power will saturate and the execution time of the
OpenMP mode will rise exponentially.

\textbf{The only modes that will continue scale linearly are the MPI and
MPI+OpenMP nodes}. That is because you can always add more nodes to your
cluster to increase performance. However, that is a supposition since we
couldn't actually run tests on much larger datasets and larger clusters
of nodes on Amazon AWS because of the large costs and computational time
needed for such feat. (for example to run the script on a 10M points
dataset would have required approximately a week with the four on demand
c3.xlarge nodes)

    \hypertarget{section}{%
\subsection{--------------------------------------------------------------------------}\label{section}}

\hypertarget{section-1}{%
\subsection{--------------------------------------------------------------------------}\label{section-1}}

    \hypertarget{openmp-mpi-vs-flink-comparizon}{%
\subsection{OpenMP-MPI vs Flink
Comparizon}\label{openmp-mpi-vs-flink-comparizon}}

    With the sections bellow we'll be comparing the results from the Flink
and OpenMP-MPI projects in terms of processing time and scalability.

    \hypertarget{relation-between-the-number-of-centroids-and-executiontime}{%
\subsubsection{1) Relation between the number of centroids and
ExecutionTime}\label{relation-between-the-number-of-centroids-and-executiontime}}

    Let's now again average the executions results on a 1M points dataset
and plot the relation between the number of centroids and the execution
times. The execution were made with a number of centroids between 1 and
10.

We'll compare the results for each mode of both projects: -
\textbf{Normal C}, \textbf{OpenMP}, \textbf{MPI}, \textbf{MPI + OpenMP}
for the OpenMP/MPI Project; - \textbf{1P}, \textbf{4P} for the Flink
Project;

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{n}{num\PYZus{}centroids} \PY{o}{=} \PY{l+m+mi}{10}
         
         \PY{c+c1}{\PYZsh{}obj\PYZus{}mean\PYZus{}vals = list()}
         \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} \PYZhy{}p 4}
         \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} \PYZhy{}p 1}
         \PY{n}{mink} \PY{o}{=} \PY{l+m+mi}{1}
         \PY{n}{maxk} \PY{o}{=} \PY{n}{num\PYZus{}centroids}\PY{o}{+}\PY{l+m+mi}{1}
         
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{mink}\PY{p}{,} \PY{n}{maxk}\PY{p}{)}\PY{p}{:}
             \PY{n}{fixed\PYZus{}path\PYZus{}objfun} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{../flink\PYZhy{}kmeans\PYZus{}clustering/script\PYZus{}results/comparison\PYZhy{}1p/results\PYZus{}time\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{n}{objval\PYZus{}iter} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fixed\PYZus{}path\PYZus{}objfun}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
                 \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                     \PY{n+nb}{iter} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{iter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval\PYZus{}iter}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{objval}\PY{p}{)}
                     
             \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{numpy}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{objval\PYZus{}iter}\PY{p}{)}\PY{p}{]}\PY{p}{)}
             
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{mink}\PY{p}{,} \PY{n}{maxk}\PY{p}{)}\PY{p}{:}
             \PY{n}{fixed\PYZus{}path\PYZus{}objfun} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{../flink\PYZhy{}kmeans\PYZus{}clustering/script\PYZus{}results/comparison\PYZhy{}4p/results\PYZus{}time\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{n}{objval\PYZus{}iter} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fixed\PYZus{}path\PYZus{}objfun}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
                 \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                     \PY{n+nb}{iter} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{iter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval\PYZus{}iter}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{objval}\PY{p}{)}
                     
             \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{numpy}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{objval\PYZus{}iter}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{x\PYZus{}val} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p}\PY{p}{]}
         \PY{n}{y\PYZus{}val\PYZus{}1p} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p}\PY{p}{]}
         \PY{n}{y\PYZus{}val\PYZus{}4p} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p}\PY{p}{]}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}n\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normal C}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp\PYZus{}et}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI + OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}1p}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Flink\PYZus{}1P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}val}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}4p}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}c}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Flink\PYZus{}4P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of centroids \PYZhy{} Execution time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{} of centroids}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Execution time [ms]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{loc}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{upper left}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_49_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resulting-plot-analysis---processing-time}{%
\subsubsection{Resulting plot analysis - Processing
Time}\label{resulting-plot-analysis---processing-time}}

On the above plot we can observe that for Flink, the execution time does
not change too much increasing the number of centroids. The overhead
introduced by Flink is much bigger with respect to the increment of time
needed to compute the position of more centroids and so we can not
observe an increment of time when adding more centroids.

Things are different for the OpenMP/MP Project, where for all four modes
we see an increase of execution time by increasing the number of
centroids.

That is because MPI and OpenMP are protocols of a lower level compared
to Flink, therefore are more efficient and have a smaller overhead. This
too is the reason why the OpenMP/MPI project's modes have a smaller
execution time compared to he Flink project's modes.

    \hypertarget{relation-between-datasets-number-of-points-and-executiontime}{%
\subsubsection{2) Relation between Dataset's number of points and
ExecutionTime}\label{relation-between-datasets-number-of-points-and-executiontime}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{n}{num\PYZus{}of\PYZus{}points} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+m+mi}{1000}\PY{p}{,}\PY{l+m+mi}{10000}\PY{p}{,}\PY{l+m+mi}{100000}\PY{p}{,}\PY{l+m+mi}{1000000}\PY{p}{]}
         \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} \PYZhy{}p 4}
         \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} \PYZhy{}p 1}
         
         \PY{n}{mink} \PY{o}{=} \PY{l+m+mi}{1}
         \PY{n}{maxk} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{num\PYZus{}of\PYZus{}points}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}
         
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{mink}\PY{p}{,} \PY{n}{maxk}\PY{p}{)}\PY{p}{:}
             \PY{n}{fixed\PYZus{}path\PYZus{}objfun} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{../flink\PYZhy{}kmeans\PYZus{}clustering/script\PYZus{}results/script\PYZus{}4\PYZhy{}1/results\PYZus{}time\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{n}{objval\PYZus{}iter} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fixed\PYZus{}path\PYZus{}objfun}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
                 \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                     \PY{n+nb}{iter} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{iter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval\PYZus{}iter}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{objval}\PY{p}{)}
                     
             \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{numpy}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{objval\PYZus{}iter}\PY{p}{)}\PY{p}{]}\PY{p}{)}
             
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{mink}\PY{p}{,} \PY{n}{maxk}\PY{p}{)}\PY{p}{:}
             \PY{n}{fixed\PYZus{}path\PYZus{}objfun} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{CURRENT\PYZus{}DIR}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{../flink\PYZhy{}kmeans\PYZus{}clustering/script\PYZus{}results/script\PYZus{}4\PYZhy{}2/results\PYZus{}time\PYZus{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{n}{objval\PYZus{}iter} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{p}{)}
             \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{fixed\PYZus{}path\PYZus{}objfun}\PY{p}{)} \PY{k}{as} \PY{n}{csvfile}\PY{p}{:}
                 \PY{n}{reader} \PY{o}{=} \PY{n}{csv}\PY{o}{.}\PY{n}{DictReader}\PY{p}{(}\PY{n}{csvfile}\PY{p}{)}
                 \PY{k}{for} \PY{n}{row} \PY{o+ow}{in} \PY{n}{reader}\PY{p}{:}
                     \PY{n+nb}{iter} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{iter}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                     \PY{n}{objval\PYZus{}iter}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{objval}\PY{p}{)}
                     
             \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{numpy}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{objval\PYZus{}iter}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{y\PYZus{}val\PYZus{}4p} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}4p}\PY{p}{]}
         \PY{n}{y\PYZus{}val\PYZus{}1p} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{obj\PYZus{}mean\PYZus{}vals\PYZus{}1p}\PY{p}{]}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{n}{fig\PYZus{}width}\PY{p}{,} \PY{n}{fig\PYZus{}height}\PY{p}{)}\PY{p}{,} \PY{n}{dpi}\PY{o}{=} \PY{l+m+mi}{80}\PY{p}{,} \PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}n}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}n}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normal C}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}mp}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mp}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}mpi}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}mpi\PYZus{}mp}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}mpi\PYZus{}mp}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MPI + OpenMP}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}4p}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}4p}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}c}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Flink 4P}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{line\PYZus{}2p}\PY{p}{,} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x\PYZus{}valds}\PY{p}{,}\PY{n}{y\PYZus{}val\PYZus{}1p}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Flink}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{handles}\PY{o}{=}\PY{p}{[}\PY{n}{line\PYZus{}4p}\PY{p}{,} \PY{n}{line\PYZus{}2p}\PY{p}{,} \PY{n}{line\PYZus{}n}\PY{p}{,} \PY{n}{line\PYZus{}mp}\PY{p}{,} \PY{n}{line\PYZus{}mpi}\PY{p}{,} \PY{n}{line\PYZus{}mpi\PYZus{}mp}\PY{p}{]}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of points \PYZhy{} Execution time}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{} of points}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Execution time [ms]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_52_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resulting-plot-analysis---scalability}{%
\subsubsection{Resulting plot analysis -
Scalability}\label{resulting-plot-analysis---scalability}}

On the above plot we can observe that the scalability of both
OpenMP/MPI's project modes and Flink's project modes are linear with
respect to the linear increase of the dataset size. Moreover,
\textbf{\emph{we can valuate the scalability of the performances of each
mode by the slope of it's curve on the plot}}.

As we can see the mode that performs best of all is the OpenMP+MPI Mode
followed by OpenMP and MPI Modes. But among these, OpenMP Mode cannot
scale indefinitely as there is a limit on how many cores and
computational power a node can have.

The only modes that will continue scale linearly are the MPI and
MPI+OpenMP nodes in the OpenMP/MPI Project and the Flink with
parallelization in the Flink project (although Flink here is not
executed on physically different nodes), because you can always add more
nodes to your cluster to increase performance. Between these,
\textbf{\emph{the mode that scale better of all is the OpenMP+MPI
Mode}}, the reason being that it uses a low level management of a
cluster of nodes (with MPI) and also exploits the parallelism within
each node (with OpenMP).


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
